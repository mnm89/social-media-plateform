@ACCESS_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJONEU0R09jcy1uR2Eyd3U2Q0FuY3VaWmlWdXRuZmFnWG9MYzJlbEItb3k0In0.eyJleHAiOjE3MzI2MDgzMDcsImlhdCI6MTczMjYwODAwNywianRpIjoiODgwY2EzZjgtYzAxNC00OGIyLWJhZTctOTU0M2QxNjBlN2U0IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvcmVhbG1zL3NvY2lhbC1tZWRpYS1wbGF0Zm9ybSIsImF1ZCI6InJlYWxtLW1hbmFnZW1lbnQiLCJzdWIiOiJkOTZlZTViZS1kNmNmLTRiYmEtODU4Yy1iMjhiYjJhMmJmZWQiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJ1c2VyLW1hbmFnZW1lbnQtc2VydmljZSIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsic2VydmljZSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXJlYWxtIiwibWFuYWdlLXVzZXJzIiwidmlldy11c2VycyIsInF1ZXJ5LWdyb3VwcyIsInF1ZXJ5LXVzZXJzIl19LCJ1c2VyLW1hbmFnZW1lbnQtc2VydmljZSI6eyJyb2xlcyI6WyJ1c2VyLXNlcnZpY2UiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtdXNlci1tYW5hZ2VtZW50LXNlcnZpY2UiLCJjbGllbnRBZGRyZXNzIjoiMTkyLjE2OC42NS4xIiwiY2xpZW50X2lkIjoidXNlci1tYW5hZ2VtZW50LXNlcnZpY2UifQ.Ccnj90kbhM3CetejtvnD6SSzz0kr_dPnJtDjlPYxqxC1LW8s5apQpCvs8sgCG0jScXyPKmKNP5eI0ivfqW1egJdSurcENmxP-oHWSVk78tV98SCN0zDhv1gLLlWypAXC2B9BO9szFg9hXbgalI-vjRloAsn-cafyJ5YvI2H0dx5OfmLoKZHxXZgO95gY93tLKRG2m0oxHmnEAne-YBqdV0kdZ0RVVPIMyhu2h41F2io0hlnaNs4d_fEUgGdoW5PIYa0nQXwAFWwbyt0hLrj7yE12XtK7NnVtAwPzU_Qul9nO7zUB7s6tef3Uw56HWhCA_z9d9pWQYa6726VQhwHezg
curl -X POST "http://keycloak:8080/realms/social-media-platform/protocol/openid-connect/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=client_credentials" \
  -d "client_id=user-management-service" \
  -d "client_secret=YXbgBO3JcrBOqfpzoMfQf2gPnfZrBTuw"

### get users profile attributes and groups 
curl -X GET  "http://keycloak:8080/admin/realms/social-media-platform/users/profile" \
-H "Authorization: Bearer {{ACCESS_TOKEN}}" \
-H "Content-Type: application/json" 
 
### update users profile
curl -X PUT "http://keycloak:8080/admin/realms/social-media-platform/users/profile" \
-H "Authorization: Bearer {{ACCESS_TOKEN}}" \
-H "Content-Type: application/json" \
-d '{
  "attributes": [
    {
      "name": "email",
      "required": {
        "roles": ["user"]
      },
      "validations": {
        "email": {},
        "length": { "max": 255 }
      },
      "permissions": {
        "view": ["user"],
        "edit": ["user"]
      }
    },
    {
      "name": "username",
      "validations": {
        "length": { "min": 3, "max": 255 },
        "username-prohibited-characters": {},
        "up-username-not-idn-homograph": {}
      },
      "permissions": {
        "view": ["user"],
        "edit": ["user"]
      }
    }
  ],
  "groups": []
}'


### get post-mangement-service account token
curl -X POST "http://keycloak:8080/realms/social-media-platform/protocol/openid-connect/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=client_credentials" \
  -d "client_id=post-management-service" \
  -d "client_secret=wE1FPnBaMbd2GkcyyqQFO3s8Y7gfepk3"


### get user account token
curl -X POST "http://keycloak:8080/realms/social-media-platform/protocol/openid-connect/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=password" \
  -d "client_id=web-client" \
  -d "username=alexsmith" \
  -d "password=password" \
  -d 'scope=openid'


### crate new user
curl -X POST "http://keycloak:8080/admin/realms/social-media-platform/users" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {{ACCESS_TOKEN}}" \
  -d '{
    "username": "user",
    "email": "user@example.com",
    "firstName": "New",
    "lastName": "User",
    "enabled": true,
    "credentials": [
      {
        "type": "password",
        "value": "password",
        "temporary": false
      }
    ]
  }'
  
### retrieve a user with admin token
curl -X GET "http://keycloak:8080/admin/realms/social-media-platform/users/33333333-3333-3333-3333-333333333333" \
     -H "Authorization: Bearer {{ACCESS_TOKEN}}"

### get user info
curl -X GET 'http://keycloak:8080/realms/social-media-platform/protocol/openid-connect/userinfo' \
     -H 'Authorization: Bearer {{ACCESS_TOKEN}}'